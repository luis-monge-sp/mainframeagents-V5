/* REXX */                                                              00010000
                                                                        00020000
/****************************************************************/      00020100
/***                                                          ***/      00020200
/***   SA-AGENT VERSION 4.0.XX                                ***/      00020300
/***                                                          ***/      00020400
/***   (C) COPYRIGHT 1999-2004 BMC SOFTWARE, INC.             ***/      00020500
/***   ALL RIGHTS RESERVED.                                   ***/      00020600
/***                                                          ***/      00020700
/****************************************************************/      00020800
                                                                        00020900
/****************************************************************/      00021000
/***                                                          ***/      00022000
/***    TITLE       : REXX FILE EXECUTOR                      ***/      00023000
/***                                                          ***/      00024000
/***    FILE NAME   : CTSAREX                                 ***/      00025000
/***                                                          ***/      00026000
/***    DESCRIPTION : REXX SCRIPT TO EXECUTE A FILE CONTAINING***/      00027000
/***                  COMMANDS .                              ***/      00028000
/***                  TRAP ITS OUTPUT AND WRITE IT TO EXECOUT ***/      00029000
/***                  DDCARD .                                ***/      00030000
/***                                                          ***/      00040000
/****************************************************************/      00050000
                                                                        00060000
/****************************************************************/      00070000
/***                                                          ***/      00080000
/***       INITIALIZATION                                     ***/      00090000
/***                                                          ***/      00100000
/****************************************************************/      00110000
                                                                        00120000
ARG DDN PARM                                                            00130000
ADDRESS TSO "PROFILE NOPREFIX"                                          00140000
                                                                        00150000
/****************************************************************/      00160000
/***                                                          ***/      00170000
/***       SET OUTPUT TRAPPING, AND EXECUTE THE REXX          ***/      00180000
/***                                                          ***/      00190000
/****************************************************************/      00200000
                                                                        00210000
X = OUTTRAP("LINE.","*", CONCAT )                                       00220000
ADDRESS TSO "EX " "'"PARM"'"                                            00230000
X = OUTTRAP('OFF')                                                      00240000
CMD_RC = RC                                                             00250000
                                                                        00260000
/****************************************************************/      00270000
/***                                                          ***/      00280000
/***        CONCATENATE THE COMMAND AND ITS OUTPUT            ***/      00290000
/***                                                          ***/      00300000
/****************************************************************/      00310000
                                                                        00320000
J = 0                                                                   00330000
DO I =1 TO LINE.0 BY 1                                                  00340000
   IF WORDS(LINE.I) > 1 THEN DO                                         00350000
      IF WORD(LINE.I,2) ^= "*-*" THEN DO                                00360000
         J = J + 1                                                      00370000
         OUT.J = LINE.I                                                 00380000
      END                                                               00390000
   END                                                                  00400000
   ELSE DO                                                              00410000
      J= J + 1                                                          00420000
      OUT.J = LINE.I                                                    00430000
   END                                                                  00440000
END                                                                     00450000
OUT.0 = J                                                               00460000
                                                                        00470000
/****************************************************************/      00480000
/***                                                          ***/      00490000
/***        WRITE OUTPUT TO OUTPUT FILE                       ***/      00500000
/***                                                          ***/      00510000
/****************************************************************/      00520000
                                                                        00530000
"EXECIO" OUT.0 "DISKW " DDN " ( STEM OUT. FINIS "                       00540000
                                                                        00550000
/****************************************************************/      00560000
/***                                                          ***/      00570000
/***        FINISH WITH COMMAND RC                            ***/      00580000
/***                                                          ***/      00590000
/****************************************************************/      00600000
                                                                        00610000
EXIT CMD_RC                                                             00620000
