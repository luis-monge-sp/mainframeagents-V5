/* REXX */                                                              00010000
                                                                        00020000
/****************************************************************/      00020100
/***                                                          ***/      00020200
/***   SA-AGENT VERSION 4.0.XX                                ***/      00020300
/***                                                          ***/      00020400
/***   (C) COPYRIGHT 1999-2004 BMC SOFTWARE, INC.             ***/      00020500
/***   ALL RIGHTS RESERVED.                                   ***/      00020600
/***                                                          ***/      00020700
/****************************************************************/      00020800
/****************************************************************/      00020900
                                                                        00021000
/****************************************************************/      00022000
/***                                                          ***/      00023000
/***    TITLE       : API PRE/POST SCRIPT FRONT END           ***/      00024000
/***                                                          ***/      00025000
/***    FILE NAME   : CTSASCR                                 ***/      00026000
/***                                                          ***/      00027000
/***    DESCRIPTION : REXX SCRIPT TO EXECUTE AN API PRE/POST  ***/      00028000
/***                  SCRIPT                                  ***/      00029000
/***                                                          ***/      00030000
/****************************************************************/      00040000
                                                                        00050000
/****************************************************************/      00060000
/***                                                          ***/      00070000
/***       INITIALIZATION                                     ***/      00080000
/***                                                          ***/      00090000
/****************************************************************/      00100000
                                                                        00110000
ARG SCRIPT DDN TOKEN                                                    00120000
ADDRESS TSO                                                             00130000
                                                                        00140000
/****************************************************************/      00150000
/***                                                          ***/      00160000
/***       SET OUTPUT TRAPPING                                ***/      00170000
/***                                                          ***/      00180000
/****************************************************************/      00190000
                                                                        00200000
MSGTRAPSTAT = TRAPMSG(ON)                                               00210000
X = OUTTRAP("LINE.","*", CONCAT )                                       00220000
                                                                        00230000
"EXEC " || "'" || SCRIPT || "' " || "'" || TOKEN  "'"                   00240000
                                                                        00250000
X = OUTTRAP('OFF')                                                      00260000
MSGTRAPSTAT = TRAPMSG(OFF)                                              00270000
                                                                        00280000
IF ( RC > 0 ) THEN                                                      00290000
  DO                                                                    00300000
    IF ( DATATYPE(LINE.0,N) ) THEN LINE.0 = LINE.0 + 1                  00310000
                              ELSE LINE.0 = 1                           00320000
    K=LINE.0                                                            00330000
    LINE.K='SCRIPT ' SCRIPT ' HAS FAILED'                               00340000
  END                                                                   00350000
                                                                        00360000
/****************************************************************/      00370000
/***                                                          ***/      00380000
/***        WRITE OUTPUT TO OUTPUT FILE                       ***/      00390000
/***                                                          ***/      00400000
/****************************************************************/      00410000
                                                                        00420000
IF ( DATATYPE(LINE.0,N) ) THEN ,                                        00430000
    "EXECIO" LINE.0 "DISKW"  DDN "( STEM LINE. FINIS "                  00440000
                                                                        00450000
