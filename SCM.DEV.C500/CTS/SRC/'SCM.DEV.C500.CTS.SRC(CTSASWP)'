         START                                                          00010000
*                                                                       00020000
****************************************************************        00030000
****                                                        ****        00040000
****     CONTROL-SA  RELEASE 3.0.0                          ****        00050000
****                                                        ****        00060000
****     LICENCED MATERIAL - NEW DIMENSION SOFTWARE LTD.    ****        00070000
****                                                        ****        00080000
****************************************************************        00090000
*                                                                       00100000
****************************************************************        00110000
*                                                              *        00120000
* TITLE            : MAKE NONE-SWAPPABLE STARTED TASK          *        00130000
*                                                              *        00140000
* FILE NAME        : CTSASWP                                   *        00150000
*                                                              *        00160000
* AUTHOR           : SHAVRTSMAN ALEXANDER                      *        00170000
*                                                              *        00180000
* CREATION DATE    : 19/2/98                                   *        00190000
*                                                              *        00200000
* DESCRIPTION      :                                           *        00210000
*                                                              *        00240000
* ASSUMPTIONS AND                                              *        00250000
*   CONSIDERATIONS : 1. CALLER IS APF AUTHORIZED               *        00260000
*                                                              *        00270000
****************************************************************        00280000
*------- V.3.0.0 ----------------------------------------------*        00290000
****************************************************************        00310000
*                                                                       00560000
CTSASWP  CSECT                                                          00570000
CTSASWP  AMODE ANY                                                      00580000
CTSASWP  RMODE ANY                                                      00590000
*                                                                       00600000
****************************************************************        00610000
*        INITIALIZE                                            *        00620000
****************************************************************        00630000
*                                                                       00640000
         BEGIN *                                                        00650000
         CTSEQUR                                                        00651000
         CTSLEVEL CTSASWP                                               00660000
*                                                                       03090000
*        MAKE OURSELVES NONSWAPPABLE                                    03100000
*                                                                       03110000
         MODESET MODE=SUP,KEY=ZERO                                      03120000
         XC    ECB,ECB                                                  03130000
         LA    R1,ECB                  ON ECB                           03140000
         SYSEVENT TRANSWAP             MAKE US NON=SWAPABLE             03150000
         CLM   R1,1,=X'04'             ALREADY NON-SWAPPABLE ?          03160000
         BE    NOWAIT                  YES - DONT WAIT                  03170000
         WAIT  ECB=ECB                  WAIT FOR SWAP OUT               03180000
NOWAIT   DS    0H                                                       03190000
         MODESET MODE=PROB,KEY=NZERO                                    03200000
*                                                                       03661000
****************************************************************        03662000
*        FINISH                                                         03663000
****************************************************************        03664000
*                                                                       03665000
         BRTRN 0                                                        03666000
         LTORG ,                                                        03667000
         DROP  ,                                                        03668000
*                                                                       07390000
*********************************************************************** 07400000
*        COMMON WORKAREA                                                07410000
*********************************************************************** 07420000
*                                                                       07720000
ECB      DC    A(0)                                                     07790000
*                                                                       07810000
         END                                                            08600000
