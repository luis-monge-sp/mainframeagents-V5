         TITLE 'CTSADLM - DELETE A MODULE FROM STORAGE'                 00010000
*                                                                       00020000
****************************************************************        00030000
****                                                        ****        00040000
****     CONTROL-SA  RELEASE 1.3.0                          ****        00050000
****                                                        ****        00060000
****     LICENCED MATERIAL - NEW DIMENSION SOFTWARE LTD.    ****        00070000
****                                                        ****        00080000
****************************************************************        00090000
*                                                                       00100000
****************************************************************        00110000
*                                                              *        00120000
* TITLE            : DELETE A LOADED MODULE FROM STORAGE       *        00130000
*                                                              *        00140000
* FILE NAME        : CTSADLM                                   *        00150000
*                                                              *        00160000
* AUTHOR           : DORON COHEN                               *        00170000
*                                                              *        00180000
* CREATION DATE    : 07/03/94                                  *        00190000
*                                                              *        00200000
* DESCRIPTION      :                                           *        00210000
*                                                              *        00220000
* ASSUMPTIONS AND                                              *        00230000
*   CONSIDERATIONS :                                           *        00240000
*                                                              *        00250000
****************************************************************        00260000
*                                                                       00270000
****************************************************************        00280000
* MOD.ID   WHO      WHEN     DESCRIPTION                       *        00290000
* -------- -------- -------- --------------------------------- *        00300000
*                                                              *        00310000
****************************************************************        00320000
         GBLC  &AMODUSE                                                 00330000
&AMODUSE SETC  'CVT'                                                    00340000
*                                                                       00350000
*---------------------------------------------------------------*       00360000
*        PARAMETER                                                      00370000
*---------------------------------------------------------------*       00380000
PARM     DSECT                                                          00390000
PARMLMOD DS     A                      LMOD NAME (CL8)                  00400000
*                                                                       00410000
CTSADLM  CSECT                                                          00420000
CTSADLM  RMODE ANY                                                      00430000
CTSADLM  AMODE ANY                                                      00440000
*                                                                       00450000
*---------------------------------------------------------------*       00460000
*        INITIALIZE                                                     00470000
*---------------------------------------------------------------*       00480000
         BEGIN *                                                        00490000
         CTSEQUR                                                        00491000
         CTSLEVEL                                                       00500000
         LR    R10,R1                                                   00510000
         USING PARM,R10                                                 00520000
*                                                                       00530000
         CTSAMOD 31,R=R2                                                00540000
         ST    R2,AMODE                                                 00550000
*                                                                       00560000
*---------------------------------------------------------------*       00570000
*        DELETE THE MODULE                                              00580000
*---------------------------------------------------------------*       00590000
         L     R4,PARMLMOD                                              00600000
         DELETE EPLOC=(4)                                               00610000
         LTR   R15,R15                                                  00620000
         BZ    SOF                                                      00630000
*                                                                       00640000
*---------------------------------------------------------------*       00650000
*        ERROR CODES                                                    00660000
*---------------------------------------------------------------*       00670000
ERRORDEL DS    0H                                                       00680000
         LA    R15,4                                                    00690000
         B     SOF                                                      00700000
*                                                                       00710000
*---------------------------------------------------------------*       00720000
*        TERMINATATION                                                  00730000
*---------------------------------------------------------------*       00740000
SOF      DS    0H                                                       00750000
         ST    R15,RC                                                   00760000
*---------------------------------------------------------------*       00770000
*        FINISH                                                         00780000
*---------------------------------------------------------------*       00790000
         L     R2,AMODE                                                 00800000
         CTSAMOD RESTORE,R=R2                                           00810000
*                                                                       00820000
         L     R15,RC                                                   00830000
         BRTRN (15)                                                     00840000
*                                                                       00850000
*---------------------------------------------------------------*       00860000
*        WORKAREA                                                       00870000
*---------------------------------------------------------------*       00880000
AMODE    DC    A(0)            ENTRY AMODE                              00890000
RC       DC    F'0'            RETURN CODE                              00900000
         LTORG                                                          00910000
*                                                                       00920000
*---------------------------------------------------------------*       00930000
*        CONTROL BLOCKS MAPPING                                         00940000
*---------------------------------------------------------------*       00950000
         PRINT NOGEN                                                    00960000
CVT      CVT   DSECT=YES,PREFIX=YES,LIST=YES                            00970000
         END                                                            00980000
